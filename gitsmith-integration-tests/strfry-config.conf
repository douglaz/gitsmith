##
## Strfry config for integration tests
##

# Directory to store the database and other data
db = "./strfry-db"

# Port for WebSocket connections
relay {
    # Interface to listen on (use 127.0.0.1 for local testing)
    bind = "127.0.0.1"
    
    # Port number
    port = 7879
    
    # NOFILES limit - set to 0 to use system default for testing
    nofiles = 0
    
    # Maximum number of concurrent connections
    maxConnections = 100
    
    # WebSocket settings
    realIpHeader = ""
    
    # Timeouts
    autoPingSeconds = 55
    enableCompression = true
}

# Events settings
events {
    # Maximum event size in bytes
    maxEventSize = 65536
    
    # Reject events older than this many seconds
    rejectEventsOlderThanSeconds = 315360000  # 10 years
    
    # Reject events newer than this many seconds (prevent future-dated events)
    rejectEventsNewerThanSeconds = 900  # 15 minutes
    
    # Reject ephemeral events older than this
    rejectEphemeralEventsOlderThanSeconds = 3600
    
    # Reject ephemeral events newer than this
    rejectEphemeralEventsNewerThanSeconds = 900
}

# Ingestion settings
ingester {
    # Number of threads for processing incoming events
    numThreads = 2
}

# Database settings
dbParams {
    # Explicitly set LMDB parameters
    noSync = false
}

# Logging
logging {
    # Log level: TRACE, DEBUG, INFO, WARN, ERROR
    level = "INFO"
}

# Negentropy (set reconciliation protocol)
negentropy {
    # Enable negentropy support
    enabled = true
}